<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Kelola Artikel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style type="text/tailwindcss">
        @layer base {
            /* Definisi warna kustom untuk Tailwind */
            :root {
                --color-primary: #01BF81;
                --color-secondary: #004854;
                --color-background-light: #ECEBD6;
                --color-white: #FFFFFF;
            }
        }
        @layer components {
            .btn-primary {
                @apply bg-primary hover:bg-emerald-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out;
                @apply active:scale-95; /* Efek klik */
            }
            .btn-secondary {
                @apply bg-secondary hover:bg-cyan-800 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out;
                @apply active:scale-95;
            }
            .btn-delete {
                @apply bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out;
                @apply active:scale-95;
            }
            .form-input-modal {
                @apply w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition duration-200 ease-in-out;
            }
        }
        @layer utilities {
            /* Animasi fade in */
            .animate-fade-in {
                animation: fadeIn 0.8s ease-out forwards;
            }
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(20px); }
                to { opacity: 1; transform: translateY(0); }
            }
            /* Animasi modal */
            .animate-modal-enter {
                animation: modalEnter 0.3s ease-out forwards;
            }
            .animate-modal-leave {
                animation: modalLeave 0.3s ease-in forwards;
            }
            @keyframes modalEnter {
                from { opacity: 0; transform: translateY(-50px) scale(0.9); }
                to { opacity: 1; transform: translateY(0) scale(1); }
            }
            @keyframes modalLeave {
                from { opacity: 1; transform: translateY(0) scale(1); }
                to { opacity: 0; transform: translateY(-50px) scale(0.9); }
            }
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: 'var(--color-primary)',
                        secondary: 'var(--color-secondary)',
                        backgroundLight: 'var(--color-background-light)',
                        white: 'var(--color-white)',
                    },
                }
            }
        }
    </script>
</head>
<body class="bg-backgroundLight min-h-screen flex items-center justify-center p-4 font-sans text-gray-800">

    <div class="bg-white rounded-xl shadow-2xl p-6 md:p-10 w-full max-w-4xl animate-fade-in">
        <div class="flex justify-between items-center mb-8">
            <h1 class="text-secondary text-3xl md:text-4xl font-extrabold">Kelola Artikel</h1>
            <button class="btn-primary" onclick="openAddArticleModal()">Tambah Artikel</button>
        </div>

        <div id="articles-list" class="space-y-4 max-h-[60vh] overflow-y-auto pr-2">
            </div>

    </div>

    <div id="editArticleModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 hidden">
        <div class="bg-white rounded-lg shadow-xl p-6 md:p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto animate-modal-enter relative">
            <div class="flex justify-between items-center mb-6 sticky top-0 bg-white pb-4 z-10">
                <h2 class="text-2xl font-bold text-secondary">Edit Artikel</h2>
                <button class="text-gray-500 hover:text-gray-700 text-3xl font-semibold leading-none" onclick="closeEditModal()">&times;</button>
            </div>
            <form id="editArticleForm">
                <input type="hidden" id="editArticleId">
                <div class="mb-4">
                    <label for="modalEditAuthor" class="block text-gray-700 font-semibold mb-2">Author:</label>
                    <input type="text" id="modalEditAuthor" name="author" class="form-input-modal" required>
                </div>
                <div class="mb-4">
                    <label for="modalEditTitle" class="block text-gray-700 font-semibold mb-2">Judul Artikel:</label>
                    <input type="text" id="modalEditTitle" name="title" class="form-input-modal" required>
                </div>
                <div class="mb-4">
                    <label for="modalEditUrl" class="block text-gray-700 font-semibold mb-2">URL Artikel (opsional):</label>
                    <input type="url" id="modalEditUrl" name="url" class="form-input-modal">
                </div>
                <div class="mb-4">
                    <label for="modalEditDescription" class="block text-gray-700 font-semibold mb-2">Deskripsi Singkat:</label>
                    <textarea id="modalEditDescription" name="description" rows="3" class="form-input-modal resize-y" required></textarea>
                </div>
                <div class="mb-6">
                    <label for="modalEditContent" class="block text-gray-700 font-semibold mb-2">Isi Konten Artikel:</label>
                    <textarea id="modalEditContent" name="content" rows="10" class="form-input-modal resize-y" required></textarea>
                </div>
                <div class="flex justify-end space-x-3 mt-6 sticky bottom-0 bg-white pt-4 z-10">
                    <button type="button" class="btn-secondary" onclick="closeEditModal()">Batal</button>
                    <button type="submit" class="btn-primary">Simpan Perubahan</button>
                </div>
            </form>
        </div>
    </div>

    <div id="addArticleModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 hidden">
        <div class="bg-white rounded-lg shadow-xl p-6 md:p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto animate-modal-enter relative">
            <div class="flex justify-between items-center mb-6 sticky top-0 bg-white pb-4 z-10">
                <h2 class="text-2xl font-bold text-secondary">Tambah Artikel Baru</h2>
                <button class="text-gray-500 hover:text-gray-700 text-3xl font-semibold leading-none" onclick="closeAddArticleModal()">&times;</button>
            </div>
            <form id="addArticleForm">
                <div class="mb-4">
                    <label for="modalAddAuthor" class="block text-gray-700 font-semibold mb-2">Author:</label>
                    <input type="text" id="modalAddAuthor" name="author" class="form-input-modal" required>
                </div>
                <div class="mb-4">
                    <label for="modalAddTitle" class="block text-gray-700 font-semibold mb-2">Judul Artikel:</label>
                    <input type="text" id="modalAddTitle" name="title" class="form-input-modal" required>
                </div>
                <div class="mb-4">
                    <label for="modalAddUrl" class="block text-gray-700 font-semibold mb-2">URL Artikel (opsional):</label>
                    <input type="url" id="modalAddUrl" name="url" class="form-input-modal">
                </div>
                <div class="mb-4">
                    <label for="modalAddDescription" class="block text-gray-700 font-semibold mb-2">Deskripsi Singkat:</label>
                    <textarea id="modalAddDescription" name="description" rows="3" class="form-input-modal resize-y" required></textarea>
                </div>
                <div class="mb-6">
                    <label for="modalAddContent" class="block text-gray-700 font-semibold mb-2">Isi Konten Artikel:</label>
                    <textarea id="modalAddContent" name="content" rows="10" class="form-input-modal resize-y" required></textarea>
                </div>
                <div class="flex justify-end space-x-3 mt-6 sticky bottom-0 bg-white pt-4 z-10">
                    <button type="button" class="btn-secondary" onclick="closeAddArticleModal()">Batal</button>
                    <button type="submit" class="btn-primary">Tambah Artikel</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Data Artikel Contoh (dalam kasus nyata, ini akan dari database)
        let articles = [
            {
                id: 1,
                author: "Rian Hidayat",
                title: "Inovasi Teknologi AI di Era Digital",
                url: "https://example.com/ai-era-digital",
                description: "Membahas perkembangan terbaru dalam kecerdasan buatan dan dampaknya pada masyarakat modern. Ini adalah deskripsi yang cukup panjang untuk menguji batas tinggi modal.",
                content: "Isi lengkap artikel tentang AI di era digital. Ini adalah bagian konten yang sangat, sangat, sangat panjang. Kita akan membuatnya berulang-ulang untuk memastikan modal bisa di-scroll dengan benar dan tidak melebihi layar. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
            },
            {
                id: 2,
                author: "Siti Rahayu",
                title: "Panduan Lengkap Memulai Berkebun Hidroponik",
                url: "https://example.com/hidroponik",
                description: "Tutorial langkah demi langkah untuk pemula yang ingin mencoba berkebun dengan sistem hidroponik di rumah.",
                content: "Isi lengkap artikel tentang hidroponik..."
            },
            {
                id: 3,
                author: "Budi Santoso",
                title: "Strategi Pemasaran Digital untuk UMKM",
                url: "https://example.com/digital-marketing-umkm",
                description: "Pelajari strategi efektif untuk meningkatkan visibilitas dan penjualan UMKM melalui pemasaran digital.",
                content: "Isi lengkap artikel tentang pemasaran digital untuk UMKM..."
            },
        ];

        // Elemen DOM untuk Dashboard Utama
        const articlesList = document.getElementById('articles-list');

        // Elemen DOM untuk Modal Edit Artikel
        const editArticleModal = document.getElementById('editArticleModal');
        const editArticleForm = document.getElementById('editArticleForm');
        const editArticleId = document.getElementById('editArticleId');
        const modalEditAuthor = document.getElementById('modalEditAuthor');
        const modalEditTitle = document.getElementById('modalEditTitle');
        const modalEditUrl = document.getElementById('modalEditUrl');
        const modalEditDescription = document.getElementById('modalEditDescription');
        const modalEditContent = document.getElementById('modalEditContent');

        // Elemen DOM untuk Modal Tambah Artikel Baru
        const addArticleModal = document.getElementById('addArticleModal');
        const addArticleForm = document.getElementById('addArticleForm');
        const modalAddAuthor = document.getElementById('modalAddAuthor');
        const modalAddTitle = document.getElementById('modalAddTitle');
        const modalAddUrl = document.getElementById('modalAddUrl');
        const modalAddDescription = document.getElementById('modalAddDescription');
        const modalAddContent = document.getElementById('modalAddContent');


        // --- Fungsionalitas Umum ---

        // Fungsi untuk merender daftar artikel
        function renderArticles() {
            articlesList.innerHTML = ''; // Kosongkan daftar yang ada
            articles.forEach(article => {
                const articleDiv = document.createElement('div');
                articleDiv.className = 'article-item flex flex-col md:flex-row items-start md:items-center justify-between p-4 bg-gray-50 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200';
                articleDiv.innerHTML = `
                    <div class="mb-4 md:mb-0 md:mr-4 flex-grow">
                        <h2 class="text-xl font-bold text-secondary">${article.title}</h2>
                        <p class="text-gray-600 text-sm italic">Oleh: ${article.author}</p>
                        <p class="text-gray-700 mt-1 line-clamp-2">${article.description}</p>
                    </div>
                    <div class="flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-2 w-full md:w-auto">
                        <button class="btn-primary text-sm" onclick="openEditModal(${article.id})">Edit</button>
                        <button class="btn-delete text-sm" onclick="deleteArticle(${article.id})">Delete</button>
                    </div>
                `;
                articlesList.appendChild(articleDiv);
            });
        }

        // Fungsi untuk menghapus artikel
        function deleteArticle(articleId) {
            if (confirm('Apakah Anda yakin ingin menghapus artikel ini?')) {
                articles = articles.filter(article => article.id !== articleId);
                renderArticles(); // Render ulang daftar artikel
                alert('Artikel berhasil dihapus!'); // Feedback sederhana
            }
        }

        // Render artikel saat halaman dimuat
        document.addEventListener('DOMContentLoaded', renderArticles);

        // Menutup modal dengan tombol Escape
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                if (!editArticleModal.classList.contains('hidden')) {
                    closeEditModal();
                } else if (!addArticleModal.classList.contains('hidden')) {
                    closeAddArticleModal();
                }
            }
        });

        // Menutup modal saat klik di luar area modal (overlay)
        editArticleModal.addEventListener('click', function(event) {
            if (event.target === editArticleModal) {
                closeEditModal();
            }
        });
        addArticleModal.addEventListener('click', function(event) {
            if (event.target === addArticleModal) {
                closeAddArticleModal();
            }
        });


        // --- Fungsionalitas Modal Edit ---

        // Fungsi untuk membuka modal edit
        function openEditModal(articleId) {
            const articleToEdit = articles.find(article => article.id === articleId);
            if (articleToEdit) {
                editArticleId.value = articleToEdit.id;
                modalEditAuthor.value = articleToEdit.author;
                modalEditTitle.value = articleToEdit.title;
                modalEditUrl.value = articleToEdit.url;
                modalEditDescription.value = articleToEdit.description;
                modalEditContent.value = articleToEdit.content;
                editArticleModal.classList.remove('hidden');
                document.body.classList.add('overflow-hidden'); // Mencegah scroll body
                editArticleModal.querySelector('div').classList.remove('animate-modal-leave');
                editArticleModal.querySelector('div').classList.add('animate-modal-enter');
            }
        }

        // Fungsi untuk menutup modal edit
        function closeEditModal() {
            const modalContentDiv = editArticleModal.querySelector('div');
            modalContentDiv.classList.remove('animate-modal-enter');
            modalContentDiv.classList.add('animate-modal-leave');
            modalContentDiv.addEventListener('animationend', () => {
                editArticleModal.classList.add('hidden');
                document.body.classList.remove('overflow-hidden'); // Memungkinkan scroll body kembali
                modalContentDiv.classList.remove('animate-modal-leave');
            }, { once: true });
        }

        // Fungsi untuk menyimpan perubahan artikel
        editArticleForm.addEventListener('submit', function(event) {
            event.preventDefault();
            const id = parseInt(editArticleId.value);
            const updatedArticle = {
                id: id,
                author: modalEditAuthor.value,
                title: modalEditTitle.value,
                url: modalEditUrl.value,
                description: modalEditDescription.value,
                content: modalEditContent.value
            };

            const index = articles.findIndex(article => article.id === id);
            if (index !== -1) {
                articles[index] = updatedArticle;
                renderArticles(); // Render ulang daftar artikel
                closeEditModal(); // Tutup modal
                alert('Artikel berhasil diperbarui!'); // Feedback sederhana
            } else {
                alert('Error: Artikel tidak ditemukan!');
            }
        });


        // --- Fungsionalitas Modal Tambah Artikel ---

        // Fungsi untuk membuka modal tambah artikel
        function openAddArticleModal() {
            addArticleForm.reset(); // Kosongkan form setiap kali dibuka
            addArticleModal.classList.remove('hidden');
            document.body.classList.add('overflow-hidden'); // Mencegah scroll body
            addArticleModal.querySelector('div').classList.remove('animate-modal-leave');
            addArticleModal.querySelector('div').classList.add('animate-modal-enter');
        }

        // Fungsi untuk menutup modal tambah artikel
        function closeAddArticleModal() {
            const modalContentDiv = addArticleModal.querySelector('div');
            modalContentDiv.classList.remove('animate-modal-enter');
            modalContentDiv.classList.add('animate-modal-leave');
            modalContentDiv.addEventListener('animationend', () => {
                addArticleModal.classList.add('hidden');
                document.body.classList.remove('overflow-hidden'); // Memungkinkan scroll body kembali
                modalContentDiv.classList.remove('animate-modal-leave');
            }, { once: true });
        }

        // Fungsi untuk menambahkan artikel baru
        addArticleForm.addEventListener('submit', function(event) {
            event.preventDefault();

            // Mendapatkan ID baru (sederhana: ID terbesar + 1)
            const newId = articles.length > 0 ? Math.max(...articles.map(a => a.id)) + 1 : 1;

            const newArticle = {
                id: newId,
                author: modalAddAuthor.value,
                title: modalAddTitle.value,
                url: modalAddUrl.value,
                description: modalAddDescription.value,
                content: modalAddContent.value
            };

            articles.push(newArticle); // Tambahkan artikel baru ke array
            renderArticles(); // Render ulang daftar artikel
            closeAddArticleModal(); // Tutup modal
            alert('Artikel baru berhasil ditambahkan!'); // Feedback
        });

    </script>
</body>
</html>